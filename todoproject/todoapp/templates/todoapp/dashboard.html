{% extends 'todoapp/base.html' %}

{% block title %}Ir√°ny√≠t√≥pult{% endblock %}
{% block header_title %}Ir√°ny√≠t√≥pult{% endblock %}

{% block content %}
<div
    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="card" style="padding: 1.5rem; border-left: 4px solid var(--primary);">
        <h3 style="color: var(--text-muted); font-size: 0.875rem; text-transform: uppercase;">√ñsszes esem√©ny</h3>
        <p style="font-size: 2rem; font-weight: 700; margin-top: 0.5rem;">{{ total_events }}</p>
    </div>
    <div class="card" style="padding: 1.5rem; border-left: 4px solid #10b981;">
        <h3 style="color: var(--text-muted); font-size: 0.875rem; text-transform: uppercase;">Akt√≠v</h3>
        <p style="font-size: 2rem; font-weight: 700; margin-top: 0.5rem;">{{ active_events }}</p>
    </div>
    <div class="card" style="padding: 1.5rem; border-left: 4px solid var(--accent);">
        <h3 style="color: var(--text-muted); font-size: 0.875rem; text-transform: uppercase;">Lej√°rt</h3>
        <p style="font-size: 2rem; font-weight: 700; margin-top: 0.5rem;">{{ overdue_events.count }}</p>
    </div>
</div>

<div class="card" style="margin-bottom: 2rem;">
    <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="color: var(--accent);">‚ö†Ô∏è</span> Lej√°rt Esem√©nyek
    </h2>
    {% if overdue_events %}
    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr>
                    <th>N√©v</th>
                    <th>Szem√©ly</th>
                    <th>Hat√°rid≈ë</th>
                    <th>M≈±velet</th>
                </tr>
            </thead>
            <tbody>
                {% for event in overdue_events %}
                <tr>
                    <td><strong>{{ event.name }}</strong></td>
                    <td>{{ event.person.full_name }}</td>
                    <td style="color: var(--accent); font-weight: 600;">{{ event.deadline|date:"Y. m. d." }}</td>
                    <td>
                        <a href="/admin/todoapp/event/{{ event.id }}/change/" class="status status-expired"
                            style="text-decoration: none;">Szerkeszt√©s</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; color: var(--text-muted); padding: 1rem;">Nincs lej√°rt esem√©ny. Sz√©p munka!</p>
    {% endif %}
</div>

<div style="display: flex; gap: 1rem; flex-wrap: wrap;">
    <a href="{% url 'event_create' %}" class="btn btn-primary"
        style="flex: 1; justify-content: center; min-width: 200px; padding: 1rem;">
        ‚ûï √öj Esem√©ny L√©trehoz√°sa
    </a>
    <a href="{% url 'event_list' %}" class="btn"
        style="flex: 1; justify-content: center; min-width: 200px; border: 1px solid var(--border); background: #fff; padding: 1rem;">
        üìã √ñsszes Esem√©ny List√°ja
    </a>
</div>
{% endblock %}